@if (produto?.idProduto) {
  <div class="produto-detalhes-container">

    @if (produto?.imagens?.length) {
      <div class="galeria-imagens">
        @for (img of produto.imagens; track $index) {
          <img [src]="img.url" (mousemove)="imagemSelecionadaItem(img.url)"
            [class.selecionada]="imagemSelecionada?.includes(img.url)" alt="Imagem produto" />
        }
      </div>
    }

    <div class="imagem-principal">
      <img [src]="imagemSelecionada || produto.imgProduct" alt="Imagem principal" />
    </div>

    <div class="informacoes">
      <h1>{{ produto.productName }}</h1>
      <p class="codigo">Cód.: {{ produto.codigo }}</p>

      <div class="precos">
        <span class="preco-antigo">R$ {{ produto.price }}</span>
        <span class="desconto">Baixou {{ produto.desconto }}%</span>
        <span class="preco-final">R$ {{ produto.price }} <small>no pix</small></span>
        <span class="parcelamento">ou {{ produto.parcelas }}</span>
      </div>

      <div class="variacoes">
        <p><strong>Cor:</strong> <span class="tag">{{ produto?.cor }}</span></p>
      </div>

      <div class="quantidade-carrinho">
        <button (click)="quantidade = (quantidade > 1 ? quantidade - 1 : 1)">-</button>
        <input type="number" [value]="quantidade" />
        <button (click)="quantidade = quantidade + 1">+</button>

        <button class="btn azul" (click)="adicionarAoCarrinho(produto)">Adicionar ao carrinho</button>
        <button class="btn branco">Comprar agora</button>
      </div>

      @if (produto?.empresaDTO?.nomeCompania) {
        <p class="empresa">Vendido por <strong>{{ produto.empresaDTO.nomeCompania }}</strong></p>
      }
    </div>

    @if (produto?.produtos?.length) {
      <div class="produtos-relacionados">
        <h2>Mais produtos</h2>
        @for (item of produto.produtos; track $index) {
          <div class="produto-relacionado">
            <p>{{ item.nome }}</p>
            <!-- Outros campos do produto relacionado -->
          </div>
        }
      </div>
    }
  </div>
} @else {
  <p>Produto não encontrado.</p>
}
